<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BlockHub</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <img src="../images/icon40.png" alt="BlockHub" class="logo-icon">
        <h1>BlockHub</h1>
      </div>
      <button id="reportProblem" class="report-button">I see a problem</button>
    </header>

    <!-- Problem Report Form (Hidden by default) -->
    <div id="problemForm" class="problem-form hidden">
      <div class="form-header">
        <h3>Report a Problem</h3>
        <button id="closeForm" class="close-button">&times;</button>
      </div>
      <div class="form-body">
        <div class="form-group">
          <label for="problemSite">Website</label>
          <input type="text" id="problemSite" placeholder="example.com" readonly>
        </div>
        <div class="form-group">
          <label for="problemType">Type of Problem</label>
          <select id="problemType">
            <option value="">Select a problem type...</option>
            <option value="ad-not-blocked">Ad not blocked</option>
            <option value="cookie-banner">Cookie banner not removed</option>
            <option value="ai-widget">AI widget not hidden</option>
            <option value="false-positive">Content incorrectly blocked</option>
            <option value="site-broken">Site functionality broken</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="form-group">
          <label for="problemDetails">Additional Details</label>
          <textarea id="problemDetails" rows="4" placeholder="Please describe the issue in detail..."></textarea>
        </div>
        <button id="sendReport" class="send-button">Send Report</button>
        <div id="formStatus" class="form-status hidden"></div>
      </div>
    </div>

    <!-- Metrics Display -->
    <section class="metrics">
      <div class="metric-card">
        <div class="metric-content">
          <div class="metric-value" id="adsBlocked">0</div>
          <div class="metric-label">Ads Blocked</div>
        </div>
      </div>
      <div class="metric-card">
        <div class="metric-content">
          <div class="metric-value" id="cookiesRejected">0</div>
          <div class="metric-label">Cookies Rejected</div>
        </div>
      </div>
      <div class="metric-card">
        <div class="metric-content">
          <div class="metric-value" id="aiWidgetsRemoved">0</div>
          <div class="metric-label">AI Widgets Removed</div>
        </div>
      </div>
      <div class="metric-card">
        <div class="metric-content">
          <div class="metric-value" id="aiTermsHidden">0</div>
          <div class="metric-label">AI Terms Hidden</div>
        </div>
      </div>
    </section>

    <!-- Feature Toggles -->
    <section class="features">
      <h2>Protection Features</h2>
      
      <div class="feature-item">
        <div class="feature-info">
          <div class="feature-name">Block Advertisements</div>
          <div class="feature-description">Removes ads, trackers, and sponsored content from websites</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="blockAds" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="feature-item">
        <div class="feature-info">
          <div class="feature-name">Auto-Reject Cookie Banners</div>
          <div class="feature-description">Automatically declines cookie consent popups and privacy notices</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="blockCookies" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="feature-item">
        <div class="feature-info">
          <div class="feature-name">Hide AI Chat Widgets</div>
          <div class="feature-description">Removes AI assistants, chatbots, and "Ask AI" popups from pages</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="blockAIWidgets" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="feature-item">
        <div class="feature-info">
          <div class="feature-name">Blur AI Terminology</div>
          <div class="feature-description">Visually obscures AI-related terms and buzzwords in text content</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="hideAITerms" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>

      <!-- AI Terms Mode Selector -->
      <div class="mode-selector" id="aiTermsModeContainer">
        <div class="mode-label">Blur Intensity:</div>
        <div class="mode-options">
          <label class="mode-option">
            <input type="radio" name="aiTermsMode" value="conservative" checked>
            <span>Conservative</span>
          </label>
          <label class="mode-option">
            <input type="radio" name="aiTermsMode" value="aggressive">
            <span>Aggressive</span>
          </label>
        </div>
      </div>
    </section>

    <!-- Site Control -->
    <section class="site-control">
      <div class="current-site">
        <span class="site-label">Current site:</span>
        <span id="currentSite" class="site-url">Loading...</span>
      </div>
      <button id="toggleSite" class="site-toggle-button">
        <span id="toggleSiteText">Stop on this website</span>
      </button>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <a href="mailto:kaydin.industries@gmail.com" class="support-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 8L10.89 13.26C11.2187 13.4793 11.6049 13.5963 12 13.5963C12.3951 13.5963 12.7813 13.4793 13.11 13.26L21 8M5 19H19C19.5304 19 20.0391 18.7893 20.4142 18.4142C20.7893 18.0391 21 17.5304 21 17V7C21 6.46957 20.7893 5.96086 20.4142 5.58579C20.0391 5.21071 19.5304 5 19 5H5C4.46957 5 3.96086 5.21071 3.58579 5.58579C3.21071 5.96086 3 6.46957 3 7V17C3 17.5304 3.21071 18.0391 3.58579 18.4142C3.96086 18.7893 4.46957 19 5 19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Support
      </a>
      <button id="resetMetrics" class="reset-button" title="Reset all metrics">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M4 4V9H4.58152M19.9381 11C19.446 7.05369 16.0796 4 12 4C8.64262 4 5.76829 6.06817 4.58152 9M4.58152 9H9M20 20V15H19.4185M19.4185 15C18.2317 17.9318 15.3574 20 12 20C7.92038 20 4.55399 16.9463 4.06189 13M19.4185 15H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
